<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="pl">
<head>
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <meta charset="UTF-8">
    <meta name="color-scheme" content="light only">
    <title>recent test</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<div id="home_logo_panel">
    <div class="logo_item_container">
        <img class="logo_item" style="max-width: 150px" th:src="@{/img/logo.png}" alt="">
        <p class="logo_item">HeartPi</p>
    </div>
</div>
<nav id="navbar">
    <div class="main_tab">
        <button class="nav_button" onclick="window.location.href = 'archives_tests'">archiwum</button>
    </div>
    <div class="main_tab">
        <button class="nav_button" onclick="window.location.href = 'recent_test'">ostatnie</button>
    </div>
    <div class="main_tab">
        <button class="nav_button" onclick="window.location.href = 'tests_comparison'">porównanie</button>
    </div>
</nav>


<div style="width: 100%; height: 400px;">
    <canvas id="myChart" style="width: 100%"></canvas>

</div>
<form th:action="@{/submitTest }" method="get">
    <label for="name_input">imię:</label>
    <input th:value="${user.name}" id="name_input" disabled="disabled" type="text" name="name_input">
    <label for="age_input">wiek:</label>
    <input th:value="${user.age}" id="age_input" type="number" name="age_input" disabled="disabled" value="10">
    <label for="note_input">notatka:</label>
    <input id="note_input" type="text" name="note_input">
    <button name="method" value="1">odrzuć test</button>
    <button name="method" value="2">zapisz</button>
</form>
<script>
    const labels = [[${labels}]];
    const dataY = [[${dataY}]];
    console.log(dataY);
    // Konfiguracja wykresu
    const ctx = document.getElementById('myChart').getContext('2d');
    const ekgChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: labels, // Oś X - czas
            datasets: [{
                label: 'Sygnał EKG',
                data: dataY, // Oś Y - wartości sygnału
                borderColor: 'rgba(255, 0, 0, 0.7)',
                backgroundColor: 'rgba(255, 0, 0, 0.1)',
                fill: true,
                borderWidth: 2,
                pointRadius: 0, // Ukrycie punktów na linii
            }]
        },
        options: {
            responsive: true,
            scales: {
                x: {
                    type: 'linear', // Ustawienia osi czasu
                    title: {
                        display: true,
                        text: 'Czas (s)'
                    }
                },
                y: {
                    title: {
                        display: true,
                        text: 'Napięcie (mV)'
                    }
                }
            },
            plugins: {
                tooltip: {
                    mode: 'index',
                    intersect: false,
                }
            },
            animation: {
                duration: 0 // Wyłączenie animacji
            }
        }
    });
    console.log(ekgChart)
</script>
<div id="data_storage" style="display:none; background: darkviolet">
</div>

<footer class="nav_footer">
    <button onclick="location.href='home'">strona główna</button>
</footer>
</body>
</html>
